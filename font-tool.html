<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8" />
<title>Dinn Type Tool</title>

<style>
  @font-face {
    font-family: "Dinn";
    src: url("https://raw.githubusercontent.com/BaileeAllen/bail.ee/main/Dinn.woff2") format("woff2");
  }

  body {
    font-family: sans-serif;
    padding: 20px;
  }

  #textInput {
    width: 100%;
    font-size: 20px;
    padding: 10px;
    margin-bottom: 20px;
  }

  #preview {
    font-family: "Dinn";
    font-size: 72px;
    margin-bottom: 20px;
    min-height: 100px;
    border: 1px solid #ddd;
    padding: 20px;
  }

  button {
    padding: 10px 15px;
    font-size: 16px;
    margin-right: 10px;
    cursor: pointer;
  }
</style>
</head>

<body>

<h2>Type & Download</h2>

<input id="textInput" type="text" placeholder="Type somethingâ€¦" />
<div id="preview"></div>

<button onclick="downloadPNG()">Download PNG</button>
<button onclick="downloadSVG()">Download SVG</button>

<script>
// Update preview
document.getElementById("textInput").addEventListener("input", () => {
  document.getElementById("preview").textContent =
    document.getElementById("textInput").value;
});

// PNG export
async function downloadPNG() {
  const text = document.getElementById("textInput").value;

  const font = new FontFace("Dinn",
    "url(https://raw.githubusercontent.com/BaileeAllen/bail.ee/main/Dinn.woff2)");
  await font.load();
  document.fonts.add(font);

  const canvas = document.createElement("canvas");
  const ctx = canvas.getContext("2d");

  ctx.font = "72px Dinn";
  const width = ctx.measureText(text).width + 40;
  const height = 120;

  canvas.width = width;
  canvas.height = height;

  ctx.font = "72px Dinn";
  ctx.fillStyle = "black";
  ctx.fillText(text, 20, 90);

  const link = document.createElement("a");
  link.download = "text.png";
  link.href = canvas.toDataURL("image/png");
  link.click();
}

// SVG export
function downloadSVG() {
  const text = document.getElementById("textInput").value;

  const svg = `
<svg xmlns='http://www.w3.org/2000/svg'>
  <style>
    @font-face {
      font-family: 'Dinn';
      src: url('https://raw.githubusercontent.com/BaileeAllen/bail.ee/main/Dinn.woff2') format('woff2');
    }
    text {
      font-family: 'Dinn';
      font-size: 72px;
    }
  </style>
  <text x='0' y='72'>${text}</text>
</svg>`;

  const blob = new Blob([svg], { type: "image/svg+xml" });
  const url = URL.createObjectURL(blob);
  const link = document.createElement("a");
  link.href = url;
  link.download = "text.svg";
  link.click();
}
</script>

</body>
</html>
